{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useCacheErrors;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _useForceUpdate = _interopRequireDefault(require(\"../../_util/hooks/useForceUpdate\"));\n/** Always debounce error to avoid [error -> null -> error] blink */\n\n\nfunction useCacheErrors(errors, changeTrigger, directly) {\n  var cacheRef = React.useRef({\n    errors: errors,\n    visible: !!errors.length\n  });\n  var forceUpdate = (0, _useForceUpdate[\"default\"])();\n\n  var update = function update() {\n    var prevVisible = cacheRef.current.visible;\n    var newVisible = !!errors.length;\n    var prevErrors = cacheRef.current.errors;\n    cacheRef.current.errors = errors;\n    cacheRef.current.visible = newVisible;\n\n    if (prevVisible !== newVisible) {\n      changeTrigger(newVisible);\n    } else if (prevErrors.length !== errors.length || prevErrors.some(function (prevErr, index) {\n      return prevErr !== errors[index];\n    })) {\n      forceUpdate();\n    }\n  };\n\n  React.useEffect(function () {\n    if (!directly) {\n      var timeout = setTimeout(update, 10);\n      return function () {\n        return clearTimeout(timeout);\n      };\n    }\n  }, [errors]);\n\n  if (directly) {\n    update();\n  }\n\n  return [cacheRef.current.visible, cacheRef.current.errors];\n}","map":{"version":3,"sources":["/Users/nolanschneider/Programming/e-commerce/node_modules/antd/lib/form/hooks/useCacheErrors.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","useCacheErrors","React","_useForceUpdate","errors","changeTrigger","directly","cacheRef","useRef","visible","length","forceUpdate","update","prevVisible","current","newVisible","prevErrors","some","prevErr","index","useEffect","timeout","setTimeout","clearTimeout"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEA,IAAIC,uBAAuB,GAAGD,OAAO,CAAC,+CAAD,CAArC;;AAEAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqBE,cAArB;;AAEA,IAAIC,KAAK,GAAGN,uBAAuB,CAACD,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,IAAIQ,eAAe,GAAGT,sBAAsB,CAACC,OAAO,CAAC,kCAAD,CAAR,CAA5C;AAEA;;;AACA,SAASM,cAAT,CAAwBG,MAAxB,EAAgCC,aAAhC,EAA+CC,QAA/C,EAAyD;AACvD,MAAIC,QAAQ,GAAGL,KAAK,CAACM,MAAN,CAAa;AAC1BJ,IAAAA,MAAM,EAAEA,MADkB;AAE1BK,IAAAA,OAAO,EAAE,CAAC,CAACL,MAAM,CAACM;AAFQ,GAAb,CAAf;AAIA,MAAIC,WAAW,GAAG,CAAC,GAAGR,eAAe,CAAC,SAAD,CAAnB,GAAlB;;AAEA,MAAIS,MAAM,GAAG,SAASA,MAAT,GAAkB;AAC7B,QAAIC,WAAW,GAAGN,QAAQ,CAACO,OAAT,CAAiBL,OAAnC;AACA,QAAIM,UAAU,GAAG,CAAC,CAACX,MAAM,CAACM,MAA1B;AACA,QAAIM,UAAU,GAAGT,QAAQ,CAACO,OAAT,CAAiBV,MAAlC;AACAG,IAAAA,QAAQ,CAACO,OAAT,CAAiBV,MAAjB,GAA0BA,MAA1B;AACAG,IAAAA,QAAQ,CAACO,OAAT,CAAiBL,OAAjB,GAA2BM,UAA3B;;AAEA,QAAIF,WAAW,KAAKE,UAApB,EAAgC;AAC9BV,MAAAA,aAAa,CAACU,UAAD,CAAb;AACD,KAFD,MAEO,IAAIC,UAAU,CAACN,MAAX,KAAsBN,MAAM,CAACM,MAA7B,IAAuCM,UAAU,CAACC,IAAX,CAAgB,UAAUC,OAAV,EAAmBC,KAAnB,EAA0B;AAC1F,aAAOD,OAAO,KAAKd,MAAM,CAACe,KAAD,CAAzB;AACD,KAFiD,CAA3C,EAEH;AACFR,MAAAA,WAAW;AACZ;AACF,GAdD;;AAgBAT,EAAAA,KAAK,CAACkB,SAAN,CAAgB,YAAY;AAC1B,QAAI,CAACd,QAAL,EAAe;AACb,UAAIe,OAAO,GAAGC,UAAU,CAACV,MAAD,EAAS,EAAT,CAAxB;AACA,aAAO,YAAY;AACjB,eAAOW,YAAY,CAACF,OAAD,CAAnB;AACD,OAFD;AAGD;AACF,GAPD,EAOG,CAACjB,MAAD,CAPH;;AASA,MAAIE,QAAJ,EAAc;AACZM,IAAAA,MAAM;AACP;;AAED,SAAO,CAACL,QAAQ,CAACO,OAAT,CAAiBL,OAAlB,EAA2BF,QAAQ,CAACO,OAAT,CAAiBV,MAA5C,CAAP;AACD","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useCacheErrors;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _useForceUpdate = _interopRequireDefault(require(\"../../_util/hooks/useForceUpdate\"));\n\n/** Always debounce error to avoid [error -> null -> error] blink */\nfunction useCacheErrors(errors, changeTrigger, directly) {\n  var cacheRef = React.useRef({\n    errors: errors,\n    visible: !!errors.length\n  });\n  var forceUpdate = (0, _useForceUpdate[\"default\"])();\n\n  var update = function update() {\n    var prevVisible = cacheRef.current.visible;\n    var newVisible = !!errors.length;\n    var prevErrors = cacheRef.current.errors;\n    cacheRef.current.errors = errors;\n    cacheRef.current.visible = newVisible;\n\n    if (prevVisible !== newVisible) {\n      changeTrigger(newVisible);\n    } else if (prevErrors.length !== errors.length || prevErrors.some(function (prevErr, index) {\n      return prevErr !== errors[index];\n    })) {\n      forceUpdate();\n    }\n  };\n\n  React.useEffect(function () {\n    if (!directly) {\n      var timeout = setTimeout(update, 10);\n      return function () {\n        return clearTimeout(timeout);\n      };\n    }\n  }, [errors]);\n\n  if (directly) {\n    update();\n  }\n\n  return [cacheRef.current.visible, cacheRef.current.errors];\n}"]},"metadata":{},"sourceType":"script"}